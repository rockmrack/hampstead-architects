---
// GSAP Scroll-triggered animations for luxury parallax effects
---

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  // Wait for DOM to be ready
  document.addEventListener('DOMContentLoaded', () => {
    // Fade-in on scroll for sections
    gsap.utils.toArray('section').forEach((section: any) => {
      gsap.from(section, {
        opacity: 0,
        y: 50,
        duration: 1,
        ease: 'power3.out',
        scrollTrigger: {
          trigger: section,
          start: 'top 85%',
          end: 'top 50%',
          toggleActions: 'play none none reverse',
        },
      });
    });

    // Parallax effect on images
    gsap.utils.toArray('.img-framed img').forEach((img: any) => {
      gsap.to(img, {
        yPercent: -10,
        ease: 'none',
        scrollTrigger: {
          trigger: img,
          start: 'top bottom',
          end: 'bottom top',
          scrub: 1,
        },
      });
    });

    // Scale-out reveal for portfolio items
    gsap.utils.toArray('.portfolio-item').forEach((item: any) => {
      gsap.from(item, {
        scale: 0.9,
        opacity: 0,
        duration: 1.2,
        ease: 'power3.out',
        scrollTrigger: {
          trigger: item,
          start: 'top 80%',
          end: 'top 40%',
          toggleActions: 'play none none reverse',
        },
      });
    });

    // Stagger animation for list items
    gsap.utils.toArray('ul[role="list"]').forEach((list: any) => {
      const items = list.querySelectorAll('li');
      gsap.from(items, {
        opacity: 0,
        x: -20,
        duration: 0.6,
        stagger: 0.1,
        ease: 'power2.out',
        scrollTrigger: {
          trigger: list,
          start: 'top 80%',
          toggleActions: 'play none none reverse',
        },
      });
    });

    // Heading reveal with split-word animation
    gsap.utils.toArray('h1, h2').forEach((heading: any) => {
      gsap.from(heading, {
        opacity: 0,
        y: 30,
        duration: 1,
        ease: 'power3.out',
        scrollTrigger: {
          trigger: heading,
          start: 'top 85%',
          toggleActions: 'play none none reverse',
        },
      });
    });

    // Respect prefers-reduced-motion
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)');
    if (prefersReducedMotion.matches) {
      ScrollTrigger.getAll().forEach((trigger) => trigger.kill());
    }
  });
</script>
